<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>User Profile - NutriHealth</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="navbar-placeholder"></div>

  <div class="profile-container">
    <h1>My Profile</h1>

    <div class="profile-card">
      <form id="profileForm" onsubmit="updateProfile(event)">
        <label>Username</label>
        <input type="text" id="username" disabled>

        <label>Email</label>
        <input type="email" id="email" disabled>

        <label>Age</label>
        <input type="number" id="age" placeholder="Enter your age">

        <label>Gender</label>
        <select id="gender">
          <option value="">Select</option>
          <option>Male</option>
          <option>Female</option>
          <option>Other</option>
        </select>

        <label>Height (cm)</label>
        <input type="number" id="height" placeholder="Enter your height">

        <label>Weight (kg)</label>
        <input type="number" id="weight" placeholder="Enter your weight">

        <label>Activity Level</label>
        <select id="activity">
          <option value="">Select Activity Level</option>
          <option>Sedentary (Little exercise)</option>
          <option>Lightly Active</option>
          <option>Moderately Active</option>
          <option>Very Active</option>
        </select>

        <button type="submit">Save Profile</button>
        <button type="button" class="logout-btn" onclick="logoutUser()">Log Out</button>
      </form>
    </div>
  </div>

  <script src="script.js"></script>
  <script>
    // Load user data from localStorage
    window.onload = function() {
      const user = JSON.parse(localStorage.getItem('user'));
      const profile = JSON.parse(localStorage.getItem('profile'));

      if (!user) {
        alert("Please sign up first!");
        window.location.href = "signup.html";
        return;
      }

      document.getElementById('username').value = user.username;
      document.getElementById('email').value = user.email;

      if (profile) {
        document.getElementById('age').value = profile.age || '';
        document.getElementById('gender').value = profile.gender || '';
        document.getElementById('height').value = profile.height || '';
        document.getElementById('weight').value = profile.weight || '';
        document.getElementById('activity').value = profile.activity || '';
      }
    };

    // Update and save profile data
    function updateProfile(event) {
      event.preventDefault();

      const profileData = {
        age: document.getElementById('age').value,
        gender: document.getElementById('gender').value,
        height: document.getElementById('height').value,
        weight: document.getElementById('weight').value,
        activity: document.getElementById('activity').value
      };

      localStorage.setItem('profile', JSON.stringify(profileData));
      alert("Profile updated successfully!");
    }

    // Logout and clear data
    function logoutUser() {
      if (confirm("Are you sure you want to log out?")) {
        localStorage.removeItem('user');
        localStorage.removeItem('profile');
        window.location.href = "signin.html";
      }
    }
  </script>
</body>
</html>
