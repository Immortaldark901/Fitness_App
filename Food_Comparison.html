<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Food Comparison - NutriHealth</title>
  <link rel="stylesheet" href="style.css">
  <!-- Auth Check Script -->
  <script src="auth-check.js"></script>
</head>
<body>
  <!-- Navbar -->
  <div id="navbar-placeholder"></div>

  <div class="comparison-container">
    <h1>Food Comparison Tool </h1>
    <p>Select 3â€“4 foods from the list below to compare their nutrition and benefits.</p>

    <div class="food-inputs">
      <select id="food1"></select>
      <select id="food2"></select>
      <select id="food3"></select>
      <select id="food4"></select>
      <button onclick="compareFoods()">Compare</button>
    </div>

    <div id="result"></div>
  </div>

  <script src="script.js"></script>
  <script>
    // Expanded Nutrition Data
    const foodData = {
      apple: { calories: 52, protein: 0.3, carbs: 14, fat: 0.2, fiber: 2.4, pros: ["Rich in fiber", "Low in calories"], cons: ["Low in protein"] },
      banana: { calories: 89, protein: 1.1, carbs: 23, fat: 0.3, fiber: 2.6, pros: ["High in potassium", "Good energy source"], cons: ["High sugar content"] },
      oats: { calories: 68, protein: 2.4, carbs: 12, fat: 1.4, fiber: 1.7, pros: ["High in protein", "Heart healthy"], cons: ["Moderate carbs"] },
      almonds: { calories: 579, protein: 21, carbs: 22, fat: 50, fiber: 12, pros: ["Healthy fats", "High in vitamin E"], cons: ["High calories"] },
      rice: { calories: 130, protein: 2.7, carbs: 28, fat: 0.3, fiber: 0.4, pros: ["Easy to digest", "Energy source"], cons: ["Low fiber", "High carbs"] },
      paneer: { calories: 265, protein: 18, carbs: 1.2, fat: 21, fiber: 0, pros: ["Rich in protein", "Good calcium source"], cons: ["High fat"] },
      egg: { calories: 155, protein: 13, carbs: 1.1, fat: 11, fiber: 0, pros: ["Complete protein", "Rich in vitamins"], cons: ["Contains cholesterol"] },
      milk: { calories: 42, protein: 3.4, carbs: 5, fat: 1, fiber: 0, pros: ["Calcium source", "Good for bones"], cons: ["Lactose intolerance risk"] },
      chicken: { calories: 239, protein: 27, carbs: 0, fat: 14, fiber: 0, pros: ["High in protein", "Muscle building"], cons: ["Can be fatty if fried"] },
      dal: { calories: 116, protein: 9, carbs: 20, fat: 0.4, fiber: 8, pros: ["Plant protein", "Rich in fiber"], cons: ["Low in fat"] },
      spinach: { calories: 23, protein: 2.9, carbs: 3.6, fat: 0.4, fiber: 2.2, pros: ["Iron rich", "Low calorie"], cons: ["Low protein"] },
      chapati: { calories: 120, protein: 3.2, carbs: 20, fat: 3.7, fiber: 2.1, pros: ["Good carbs", "Contains fiber"], cons: ["Moderate calories"] },
      tofu: { calories: 76, protein: 8, carbs: 1.9, fat: 4.8, fiber: 0.3, pros: ["Vegan protein", "Rich in minerals"], cons: ["Low fiber"] },
      fish: { calories: 206, protein: 22, carbs: 0, fat: 12, fiber: 0, pros: ["Omega-3 fats", "Lean protein"], cons: ["Allergy risk"] },
      sweetpotato: { calories: 86, protein: 1.6, carbs: 20, fat: 0.1, fiber: 3, pros: ["Rich in vitamin A", "Low fat"], cons: ["Moderate sugar"] }
    };

    const foodNames = Object.keys(foodData).sort();

    [food1, food2, food3, food4].forEach(select => {
      const defaultOption = document.createElement("option");
      defaultOption.value = "";
      defaultOption.text = "Select Food";
      select.appendChild(defaultOption);

      foodNames.forEach(name => {
        const option = document.createElement("option");
        option.value = name;
        option.text = name.charAt(0).toUpperCase() + name.slice(1);
        select.appendChild(option);
      });
    });

    function compareFoods() {
      const selectedFoods = [food1.value, food2.value, food3.value, food4.value].filter(f => f);
      const foods = selectedFoods.map(f => foodData[f]).filter(Boolean);
      const resultDiv = document.getElementById("result");

      if (foods.length < 2) {
        resultDiv.innerHTML = "<p style='color:red; font-size:18px;'>Please select at least 2 foods.</p>";
        return;
      }

      let table = `
        <table>
          <tr><th>Nutrient</th>${selectedFoods.map(f => `<th>${f.charAt(0).toUpperCase() + f.slice(1)}</th>`).join('')}</tr>
          <tr><td>Calories (kcal)</td>${foods.map(f => `<td>${f.calories}</td>`).join('')}</tr>
          <tr><td>Protein (g)</td>${foods.map(f => `<td>${f.protein}</td>`).join('')}</tr>
          <tr><td>Carbs (g)</td>${foods.map(f => `<td>${f.carbs}</td>`).join('')}</tr>
          <tr><td>Fat (g)</td>${foods.map(f => `<td>${f.fat}</td>`).join('')}</tr>
          <tr><td>Fiber (g)</td>${foods.map(f => `<td>${f.fiber}</td>`).join('')}</tr>
        </table>
      `;

      let prosConsHTML = '<div class="pros-cons">';
      selectedFoods.forEach(f => {
        const food = foodData[f];
        prosConsHTML += `
          <div class="food-card">
            <h3>${f.charAt(0).toUpperCase() + f.slice(1)}</h3>
            <div>
              <h4>Good:</h4>
              <ul>${food.pros.map(p => `<li>${p}</li>`).join('')}</ul>
              <h4>Bad:</h4>
              <ul>${food.cons.map(c => `<li>${c}</li>`).join('')}</ul>
            </div>
          </div>
        `;
      });
      prosConsHTML += '</div>';

      resultDiv.innerHTML = table + prosConsHTML;
      highlightBestNutrients();
    }

    function highlightBestNutrients() {
      const table = document.querySelector("table");
      if (!table) return;

      for (let i = 1; i < table.rows.length; i++) {
        let maxValue = 0;
        let bestCell = null;

        for (let j = 1; j < table.rows[i].cells.length; j++) {
          const value = parseFloat(table.rows[i].cells[j].innerText);
          if (value > maxValue) {
            maxValue = value;
            bestCell = table.rows[i].cells[j];
          }
        }
        if (bestCell) bestCell.classList.add("highlight");
      }
    }
  </script>
  
</body>
</html>
