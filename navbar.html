<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Navbar</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="navbar" id="mainNavbar">
    <!-- Logo -->
    <a id="home-link" href="home.html" class="brand">
      <img src="images/logo.png" alt="NutriHealth Logo" class="logo">
    </a>

    <!-- Home -->
    <a id="home-btn" href="home.html" class="dropbtn">Home</a>
    <a id="dashboard-link" href="Dashboard.html" class="dropbtn" style="display:none;">Dashboard</a>

    <!-- Nutrition -->
    <div class="dropdown">
      <button class="dropbtn">Nutrition</button>
      <div class="dropdown-content">
        <a href="Food_Tracking.html">Food Tracking</a>
        <a href="Food_Comparison.html">Food Comparison</a>
        <a href="recommendations.html">Food Recommendations</a>
      </div>
    </div>

    <!-- Fitness -->
    <div class="dropdown">
      <button class="dropbtn">Fitness</button>
      <div class="dropdown-content">
        <a href="Workout_Generator.html">Workout Planner</a>
        <a href="Progress_Tracking.html">Progress Tracking</a>
        <a href="Exercise_Library.html">Exercise Library</a>
        <a href="BMI.html">BMI Counter</a>
      </div>
    </div>

    <!-- Recipes -->
    <a href="recipes.html" class="dropbtn">Recipes üë®‚Äçüç≥</a>

    <!-- Account Dropdown -->
    <div class="dropdown right">
      <button class="dropbtn" id="account-btn">Account</button>
      <div class="dropdown-content" id="account-options">
        <a href="signin.html" id="signinOption">Sign In</a>
        <a href="signup.html" id="signupOption">Sign Up</a>
      </div>
    </div>
  </div>
  <script>
    // Dynamically update navbar based on login status
    function updateNavbarForLogin() {
      const user = JSON.parse(localStorage.getItem('user'));
      const dashboardLink = document.getElementById('dashboard-link');
      const accountBtn = document.getElementById('account-btn');
      const accountOptions = document.getElementById('account-options');
      
      if (user) {
        // Show Dashboard link
        if (dashboardLink) dashboardLink.style.display = '';
        // Change dropdown
        accountBtn.textContent = user.username || 'Profile';
        accountOptions.innerHTML = `
          <a href="profile.html">Profile</a>
          <a href="#" id="logoutOption">Log Out</a>
        `;
        // Logout handler
        setTimeout(() => {
          const logoutOption = document.getElementById('logoutOption');
          if (logoutOption) {
            logoutOption.onclick = function(e) {
              e.preventDefault();
              localStorage.removeItem('user');
              window.location.href = "home.html";
            };
          }
        }, 50);
      } else {
        // Hide Dashboard link
        if (dashboardLink) dashboardLink.style.display = 'none';
        // Change dropdown to Sign In/Sign Up
        accountBtn.textContent = 'Account';
        accountOptions.innerHTML = `
          <a href="signin.html" id="signinOption">Sign In</a>
          <a href="signup.html" id="signupOption">Sign Up</a>
        `;
      }
    }
    document.addEventListener("DOMContentLoaded", updateNavbarForLogin);
    // Also support dynamic inclusion
    setTimeout(updateNavbarForLogin, 100);
  </script>
</body>
</html>
